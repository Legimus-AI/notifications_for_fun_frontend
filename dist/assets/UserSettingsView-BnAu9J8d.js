import{d as F,u as I,s as L,r as f,y as N,o as T,c as V,b as n,a as s,P as $,e as j,t as r,i as l,B as _,w as z,f as H,h as x,j as D,g as v,k as E,m as p,n as Y,_ as G}from"./index-C3Rphj7m.js";const J={class:"user-settings-container"},K={class:"settings-content"},O={class:"settings-section"},Q={class:"profile-info"},W={class:"info-item"},X={class:"info-value"},Z={class:"info-item"},ss={class:"info-value"},es={class:"info-item"},as={class:"info-value"},os={class:"info-item"},ts={class:"info-value"},ns={class:"settings-section"},ls={class:"form-group"},is={class:"input-wrapper"},rs=["type","disabled"],ds=["disabled"],us={class:"form-group"},cs={class:"input-wrapper"},fs=["type","disabled"],vs=["disabled"],ms={class:"password-requirements"},ws={class:"requirements-list"},ps={key:0,class:"error-message"},bs={class:"form-actions"},_s=["disabled"],gs=["disabled"],Ps=F({__name:"UserSettingsView",setup(hs){const m=I(),{success:q,error:M}=Y(),{user:w,isLoading:ys,error:g,userRole:P}=L(m),t=f(!1),d=f(!1),u=f(!1),a=f({newPassword:"",confirmPassword:""}),B=f([{label:"Dashboard",href:"/"},{label:"Settings",href:"/settings"}]),b=N(()=>a.value.newPassword===a.value.confirmPassword&&a.value.confirmPassword.length>0),h=N(()=>a.value.newPassword.length>=6&&b.value&&!t.value),R=async()=>{if(h.value){t.value=!0;try{await m.updatePassword(a.value.newPassword),q("Password updated successfully!","Success"),y()}catch(i){M(i.message||"Failed to update password","Error")}finally{t.value=!1}}},y=()=>{a.value={newPassword:"",confirmPassword:""},d.value=!1,u.value=!1,m.clearError()},A=i=>{switch(i){case"superadmin":return"role-superadmin";case"admin":return"role-admin";default:return"role-user"}},k=i=>i?new Date(i).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"Not available";return T(()=>{m.clearError()}),(i,e)=>{var C,S,U;const o=j("font-awesome-icon");return p(),V("div",J,[n($,{title:"User Settings",subtitle:"Manage your account settings and preferences",breadcrumbs:B.value},null,8,["breadcrumbs"]),s("div",K,[s("div",O,[e[8]||(e[8]=s("div",{class:"section-header"},[s("h3",null,"Profile Information"),s("p",null,"Your account details and information")],-1)),s("div",Q,[s("div",W,[e[4]||(e[4]=s("label",null,"Email Address",-1)),s("div",X,[n(o,{icon:["fas","envelope"],class:"info-icon"}),s("span",null,r(((C=l(w))==null?void 0:C.email)||"Not available"),1)])]),s("div",Z,[e[5]||(e[5]=s("label",null,"Role",-1)),s("div",ss,[n(o,{icon:["fas","user-tag"],class:"info-icon"}),s("span",{class:_(["role-badge",A(l(P))])},r(l(P)),3)])]),s("div",es,[e[6]||(e[6]=s("label",null,"Member Since",-1)),s("div",as,[n(o,{icon:["fas","calendar"],class:"info-icon"}),s("span",null,r(k((S=l(w))==null?void 0:S.created_at)),1)])]),s("div",os,[e[7]||(e[7]=s("label",null,"Last Sign In",-1)),s("div",ts,[n(o,{icon:["fas","clock"],class:"info-icon"}),s("span",null,r((U=l(w))!=null&&U.last_sign_in_at?k(l(w).last_sign_in_at):"Never"),1)])])])]),s("div",ns,[e[15]||(e[15]=s("div",{class:"section-header"},[s("h3",null,"Change Password"),s("p",null,"Update your account password for security")],-1)),s("form",{onSubmit:z(R,["prevent"]),class:"password-form"},[s("div",ls,[e[9]||(e[9]=s("label",{for:"newPassword"},"New Password",-1)),s("div",is,[x(s("input",{id:"newPassword","onUpdate:modelValue":e[0]||(e[0]=c=>a.value.newPassword=c),type:d.value?"text":"password",class:"form-input",placeholder:"Enter new password",required:"",minlength:"6",disabled:t.value},null,8,rs),[[D,a.value.newPassword]]),s("button",{type:"button",class:"password-toggle",onClick:e[1]||(e[1]=c=>d.value=!d.value),disabled:t.value},[n(o,{icon:d.value?["fas","eye-slash"]:["fas","eye"]},null,8,["icon"])],8,ds)])]),s("div",us,[e[10]||(e[10]=s("label",{for:"confirmPassword"},"Confirm New Password",-1)),s("div",cs,[x(s("input",{id:"confirmPassword","onUpdate:modelValue":e[2]||(e[2]=c=>a.value.confirmPassword=c),type:u.value?"text":"password",class:"form-input",placeholder:"Confirm new password",required:"",minlength:"6",disabled:t.value},null,8,fs),[[D,a.value.confirmPassword]]),s("button",{type:"button",class:"password-toggle",onClick:e[3]||(e[3]=c=>u.value=!u.value),disabled:t.value},[n(o,{icon:u.value?["fas","eye-slash"]:["fas","eye"]},null,8,["icon"])],8,vs)])]),s("div",ms,[e[13]||(e[13]=s("p",{class:"requirements-title"},"Password Requirements:",-1)),s("ul",ws,[s("li",{class:_({valid:a.value.newPassword.length>=6})},[n(o,{icon:a.value.newPassword.length>=6?["fas","check"]:["fas","times"]},null,8,["icon"]),e[11]||(e[11]=v(" At least 6 characters "))],2),s("li",{class:_({valid:b.value})},[n(o,{icon:b.value?["fas","check"]:["fas","times"]},null,8,["icon"]),e[12]||(e[12]=v(" Passwords match "))],2)])]),l(g)?(p(),V("div",ps,[n(o,{icon:["fas","exclamation-triangle"]}),v(" "+r(l(g)),1)])):H("",!0),s("div",bs,[s("button",{type:"submit",class:"btn btn-primary",disabled:t.value||!h.value},[t.value?(p(),E(o,{key:0,icon:["fas","spinner"],class:"spinning"})):(p(),E(o,{key:1,icon:["fas","key"]})),v(" "+r(t.value?"Updating...":"Update Password"),1)],8,_s),s("button",{type:"button",class:"btn btn-secondary",onClick:y,disabled:t.value},[n(o,{icon:["fas","times"]}),e[14]||(e[14]=v(" Cancel "))],8,gs)])],32)])])])}}}),Cs=G(Ps,[["__scopeId","data-v-62591b52"]]);export{Cs as default};
